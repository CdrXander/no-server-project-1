{"version":3,"sources":["app.js","controllers/detailCtrl.js","controllers/mainCtrl.js","controllers/searchCtrl.js","controllers/shelfCtrl.js","services/localStorageService.js","services/omdbService.js","coverDir.js"],"names":["angular","module","config","$stateProvider","$urlRouterProvider","state","url","templateUrl","controller","$scope","$stateParams","omdbService","getMovieDetails","id","then","serviceData","movie","console","log","test","localStorageService","searchForMovie","searchTitle","movies","mergeData","localMovie","omdbMovie","fullMovie","jQuery","extend","own","ownedMovies","push","watch","watchMovies","loadMovieData","savedMovies","getSavedMovies","i","length","clearShelves","service","LOCAL_STORAGE_NAME","testData","localMovieData","localStorage","movieList","JSON","parse","getItem","saveMovie","movieObj","index","findIndex","element","undefined","setItem","stringify","deleteMovie","movieId","splice","removeItem","$http","$q","title","deferred","defer","get","success","response","searchResults","Search","resolve","promise","directive","coverController","addMovieToOwned","addMovieToWatch","restrict","scope"],"mappings":"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","file":"bundle.js","sourcesContent":["/*\r\n*\r\n*/\r\nangular.module('movieShelf', ['ui.router']).config(function($stateProvider, $urlRouterProvider) {\r\n\t\r\n\r\n\t$stateProvider\r\n\t\t.state('home', {\r\n\t\t\turl: '/',\r\n\t\t\ttemplateUrl: './views/shelf.html',\r\n\t\t\tcontroller: 'shelfCtrl'\r\n\t\t})\r\n\t\t.state('search', {\r\n\t\t\turl: '/search',\r\n\t\t\ttemplateUrl: './views/search.html',\r\n\t\t\tcontroller: 'searchCtrl'\r\n\t\t})\r\n\t\t.state('details', {\r\n\t\t\turl: '/details/:id',\r\n\t\t\ttemplateUrl: './views/detail.html',\r\n\t\t\tcontroller: 'detailCtrl'\r\n\t\t})\r\n\r\n});\r\n","angular.module('movieShelf')\r\n.controller('detailCtrl', function($scope, $stateParams, omdbService) {\r\n\r\n\tomdbService.getMovieDetails($stateParams.id).then(function(serviceData) {\r\n\t\t$scope.movie = serviceData;\r\n\t\tconsole.log($scope.movie);\r\n\t});\r\n\r\n})","angular.module('movieShelf').controller('mainCtrl', function($scope) {\r\n\t$scope.test = \"Test Main Ctrl\";\r\n})","angular.module('movieShelf').controller('searchCtrl', function($scope, omdbService, localStorageService) {\r\n\t$scope.test = \"Test Search Ctrl\";\r\n\r\n\r\n\t$scope.searchForMovie = function() {\r\n\t\tomdbService.searchForMovie($scope.searchTitle).then(function(serviceData) {\r\n\t\t\t$scope.movies = serviceData;\r\n\t\t\tconsole.log($scope.movies);\r\n\t\t})\r\n\t}\r\n});","angular.module('movieShelf').controller('shelfCtrl', function($scope, omdbService, localStorageService) {\r\n\t\r\n\r\n\r\n\t//Load the extended film data asynchronously\r\n\tvar mergeData = function(localMovie) {\r\n\t\tomdbService.getMovieDetails(localMovie.id).then(function(omdbMovie) {\r\n\t\t\tvar fullMovie = {};\r\n\t\t\tjQuery.extend(fullMovie, localMovie, omdbMovie);\r\n\t\t\tif(fullMovie.own === true) {\r\n\t\t\t$scope.ownedMovies.push(fullMovie);\r\n\t\t\t}\r\n\t\t\tif(fullMovie.watch === true) {\r\n\t\t\t\t$scope.watchMovies.push(fullMovie);\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\t//Initial load\r\n\tvar loadMovieData = function() {\r\n\t\t$scope.ownedMovies = [];\r\n\t\t$scope.watchMovies = [];\r\n\r\n\t\tvar savedMovies = localStorageService.getSavedMovies();\r\n\t\tfor(var i = 0; i < savedMovies.length; i++) {\r\n\t\t\tmergeData(savedMovies[i]);\r\n\t\t}\r\n\t}\r\n\tloadMovieData();\r\n\r\n\r\n\t$scope.clearShelves = function() {\r\n\t\tlocalStorageService.clearShelves();\r\n\t\tloadMovieData();\r\n\t}\r\n\r\n});","angular.module('movieShelf').service('localStorageService', function(omdbService){\r\n  \r\n\tvar LOCAL_STORAGE_NAME = \"movieList\";\r\n\r\n\tvar testData = [\r\n\t\t\t\t\t\t{id:'tt0080684',own:true, watch:false},\r\n\t\t\t\t\t\t{id:'tt0848228',own:true, watch:false},\r\n\t\t\t\t\t\t{id:'tt1663662',own:true, watch:true},\r\n\t\t\t\t\t\t{id:'tt1675434',own:true, watch:true},\r\n\t\t\t\t\t\t{id:'tt0360717',own:false, watch:true},\r\n\t\t\t\t\t\t{id:'tt0108052',own:false, watch:true}\r\n\t\t\t\t\t]\r\n\r\n\t//GET SAVED MOVIES - public end point to get all saved movies\r\n\tthis.getSavedMovies = function() {\r\n\t\treturn loadMovieData();\r\n\t}\r\n\r\n\t//LOAD MOVIE DATA - Load movie data from local storage\r\n\tvar loadMovieData = function() {\r\n\t\tvar localMovieData;\r\n\t\tif(localStorage.movieList) {\r\n\t\t\tlocalMovieData = JSON.parse(localStorage.getItem(LOCAL_STORAGE_NAME));\r\n\t\t} else {\r\n\t\t\t//TODO: CHANGE FOR PROD\r\n\t\t\tlocalMovieData = testData;\r\n\r\n\t\t}\r\n\t\treturn localMovieData;\r\n\t}\r\n\r\n\t//SAVE MOVIE - save a movie object to local local storage \t=\t=\r\n\tthis.saveMovie = function(movieObj) {\r\n\t\t//Get the local movie data\r\n\t\tvar localMovieData = loadMovieData();\r\n\r\n\t\t//if id exists in array, update it\r\n\t\tvar index = localMovieData.findIndex(function(element) {\r\n\t\t\treturn element.id == movieObj.id;\r\n\t\t})\r\n\r\n\t\tif(index > 0) {\r\n\t\t\tif(movieObj.own != undefined) {\r\n\t\t\t\tlocalMovieData[index].own = movieObj.own;\r\n\t\t\t}\r\n\t\t\tif(movieObj.watch != undefined) {\r\n\t\t\t\tlocalMovieData[index].watch = movieObj.watch;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t} else {\r\n\t\t\tlocalMovieData.push(movieObj);\r\n\t\t}\r\n\r\n\t\t//Finally, save the data to local storage\r\n\t\tlocalStorage.setItem(LOCAL_STORAGE_NAME, JSON.stringify(localMovieData));\r\n\r\n\t}\r\n\r\n\t//DELETE MOVIE - remove movie by movieId\t=\t=\t=\r\n\tthis.deleteMovie = function(movieId) {\r\n\t\t//Get the local movie data\r\n\t\tvar localMovieData = loadMovieData();\r\n\t\t//find the id in the array\r\n\t\tvar index = localMovieData.findIndex(function(element) {\r\n\t\t\telement.id = movieObj.id;\r\n\t\t})\r\n\t\tif(index > 0) {\r\n\t\t\tlocalMovieData.splice(index, 1);\r\n\t\t\tlocalStorage.setItem(LOCAL_STORAGE_NAME, JSON.stringify(localMovieData));\r\n\t\t}\r\n\t}\r\n\r\n\t//CLEAR SHELVES - remove all movieShelf\t\t=\t=\t=\r\n\tthis.clearShelves = function() {\r\n\t\tlocalStorage.removeItem(LOCAL_STORAGE_NAME);\r\n\t}\r\n\r\n\r\n});","angular.module('movieShelf').service('omdbService', function($http, $q){\r\n  \r\n    //Acquire results for a movie search\r\n    this.searchForMovie = function(title) {\r\n      var deferred = $q.defer();\r\n\r\n      var url = 'http://www.omdbapi.com/?s=' + title +'&page=1';\r\n      $http.get(url)\r\n        .success(function(response) {\r\n          var searchResults = response.Search;\r\n          deferred.resolve(searchResults);\r\n        })\r\n        return deferred.promise;\r\n    } \r\n\r\n    //Get specific details for a single movie\r\n    this.getMovieDetails = function(id) {\r\n      var deferred = $q.defer();\r\n\r\n      var url = \"http://www.omdbapi.com/?i=\" + id + \"&plot=full&r=json&tomatoes=true\";\r\n\r\n      $http.get(url)\r\n        .success(function(response) {\r\n          deferred.resolve(response);\r\n        })\r\n        return deferred.promise;\r\n    }\r\n});","angular.module('movieShelf').directive('movieCover', function(){\r\n\t\r\n\tvar coverController = ['$scope', function($scope, localStorageService) {\r\n\t\t//Add a film to the Owned_Movies array\r\n\t\t$scope.addMovieToOwned = function(id, watch) {\r\n\t\t\tvar movie = {\r\n\t\t\t\tid:id,\r\n\t\t\t\town:true,\r\n\t\t\t}\r\n\t\t\tlocalStorageService.saveMovie(movie);\r\n\t\t}\r\n\r\n\t\t//Add a film to the To_Watch_Movies array \r\n\t\t$scope.addMovieToWatch = function(id, own) {\r\n\t\t\tvar movie = {\r\n\t\t\t\tid:id,\r\n\t\t\t\twatch:true\r\n\t\t\t}\r\n\t\t\tlocalStorageService.saveMovie(movie);\r\n\t\t}\r\n\t\r\n\t}]\r\n\r\n\treturn {\r\n\t\trestrict: \"E\",\r\n\t\ttemplateUrl: './directives/coverDir.html',\r\n\t\tscope: {\r\n\t\t\tmovie: '='\r\n\t\t},\r\n\t\tcontroller: coverController\r\n\t}\r\n})"]}