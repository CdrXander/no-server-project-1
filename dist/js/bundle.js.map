{"version":3,"sources":["app.js","controllers/detailCtrl.js","controllers/mainCtrl.js","controllers/searchCtrl.js","controllers/shelfCtrl.js","services/localStorageService.js","services/omdbService.js"],"names":["angular","module","config","$stateProvider","$urlRouterProvider","state","url","templateUrl","controller","$scope","$stateParams","omdbService","getMovieDetails","id","then","serviceData","movie","console","log","test","searchForMovie","searchTitle","movies","localStorageService","mergeData","localMovie","omdbMovie","fullMovie","jQuery","extend","own","ownedMovies","push","watch","watchMovies","loadMovieData","savedMovies","getSavedMovies","i","length","addMovieToOwned","addMovieToWatch","service","testData","combineMovies","localMovies","combinedMovieData","$http","$q","title","deferred","defer","get","success","response","searchResults","Search","resolve","promise"],"mappings":"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","file":"bundle.js","sourcesContent":["/*\r\n*\r\n*/\r\nangular.module('movieShelf', ['ui.router']).config(function($stateProvider, $urlRouterProvider) {\r\n\t\r\n\r\n\t$stateProvider\r\n\t\t.state('home', {\r\n\t\t\turl: '/',\r\n\t\t\ttemplateUrl: './views/shelf.html',\r\n\t\t\tcontroller: 'shelfCtrl'\r\n\t\t})\r\n\t\t.state('search', {\r\n\t\t\turl: '/search',\r\n\t\t\ttemplateUrl: './views/search.html',\r\n\t\t\tcontroller: 'searchCtrl'\r\n\t\t})\r\n\t\t.state('details', {\r\n\t\t\turl: '/details/:id',\r\n\t\t\ttemplateUrl: './views/detail.html',\r\n\t\t\tcontroller: 'detailCtrl'\r\n\t\t})\r\n\r\n});\r\n","angular.module('movieShelf')\r\n.controller('detailCtrl', function($scope, $stateParams, omdbService) {\r\n\r\n\tomdbService.getMovieDetails($stateParams.id).then(function(serviceData) {\r\n\t\t$scope.movie = serviceData;\r\n\t\tconsole.log($scope.movie);\r\n\t});\r\n\r\n})","angular.module('movieShelf').controller('mainCtrl', function($scope) {\r\n\t$scope.test = \"Test Main Ctrl\";\r\n})","angular.module('movieShelf').controller('searchCtrl', function($scope, omdbService) {\r\n\t$scope.test = \"Test Search Ctrl\";\r\n\r\n\r\n\t$scope.searchForMovie = function() {\r\n\t\tomdbService.searchForMovie($scope.searchTitle).then(function(serviceData) {\r\n\t\t\t$scope.movies = serviceData;\r\n\t\t\tconsole.log($scope.movies);\r\n\t\t})\r\n\t}\r\n\r\n});","angular.module('movieShelf').controller('shelfCtrl', function($scope, omdbService, localStorageService) {\r\n\t\r\n\r\n\t//Load the extended film data asynchronously\r\n\tvar mergeData = function(localMovie) {\r\n\t\tomdbService.getMovieDetails(localMovie.id).then(function(omdbMovie) {\r\n\t\t\tvar fullMovie = {};\r\n\t\t\tjQuery.extend(fullMovie, localMovie, omdbMovie);\r\n\t\t\tif(fullMovie.own === true) {\r\n\t\t\t$scope.ownedMovies.push(fullMovie);\r\n\t\t\t}\r\n\t\t\tif(fullMovie.watch === true) {\r\n\t\t\t\t$scope.watchMovies.push(fullMovie);\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\t//Initial load\r\n\tvar loadMovieData = function() {\r\n\t\t$scope.ownedMovies = [];\r\n\t\t$scope.watchMovies = [];\r\n\r\n\t\tvar savedMovies = localStorageService.getSavedMovies();\r\n\t\tfor(var i = 0; i < savedMovies.length; i++) {\r\n\t\t\tmergeData(savedMovies[i]);\r\n\t\t}\r\n\t}();\r\n\r\n\r\n\r\n\r\n\r\n\t//Add a film to the Owned_Movies array\r\n\t$scope.addMovieToOwned = function(id, watch) {\r\n\t\tvar movie = {\r\n\t\t\tid:id,\r\n\t\t\town:true,\r\n\t\t\twatch:watch\r\n\t\t}\r\n\r\n\t\t$scope.savedMovies.push(movie);\r\n\t}\r\n\r\n\r\n\t//Add a film to the To_Watch_Movies array \r\n\t$scope.addMovieToWatch = function(id, own) {\r\n\t\tvar movie = {\r\n\t\t\tid:id,\r\n\t\t\town: own,\r\n\t\t\twatch:true\r\n\t\t}\r\n\r\n\t\t$scope.savedMovies.push(movie);\r\n\t}\r\n\r\n});","angular.module('movieShelf').service('localStorageService', function(omdbService){\r\n  \r\n\tvar testData = [\r\n\t\t\t\t\t\t{id:'tt0080684',own:true, watch:false},\r\n\t\t\t\t\t\t{id:'tt0848228',own:true, watch:false},\r\n\t\t\t\t\t\t{id:'tt1663662',own:true, watch:true},\r\n\t\t\t\t\t\t{id:'tt1675434',own:true, watch:true},\r\n\t\t\t\t\t\t{id:'tt0360717',own:false, watch:true},\r\n\t\t\t\t\t\t{id:'tt0108052',own:false, watch:true}\r\n\t\t\t\t\t]\r\n\r\n\t//Public end point\r\n\tthis.getSavedMovies = function() {\r\n\t\t// return combineMovies();\r\n\t\treturn loadMovieData();\r\n\t}\r\n\r\n\r\n\r\n\t//Get saved data from local storage. For now, return dummy data\r\n\tvar loadMovieData = function() {\r\n\t\treturn testData;\r\n\t}\r\n\r\n\t//Go through all the local data, extending each one with obdb data\r\n\tvar combineMovies = function() {\r\n\t\tvar localMovies = loadMovieData();\r\n\t\tvar combinedMovieData = [];\r\n\t\tfor(var i = 0; i < localMovies.length; i++) {\r\n\t\t\tcombinedMovieData.push(mergeData(localMovies[i]));\t\t\t\r\n\t\t}\r\n\t\treturn combinedMovieData;\r\n\t}\r\n\r\n\t//This function gets the extended data for a local movie, combines it\r\n\t// with the local data, and returns the combined object\r\n\tvar mergeData = function(localMovie) {\r\n\t\tomdbService.getMovieDetails(localMovie.id).then(function(omdbMovie) {\r\n\t\t\tvar fullMovie = {};\r\n\t\t\tjQuery.extend(fullMovie, localMovie, omdbMovie);\r\n\t\t\treturn fullMovie;\r\n\t\t})\r\n\t}\r\n\r\n});","angular.module('movieShelf').service('omdbService', function($http, $q){\r\n  \r\n    //Acquire results for a movie search\r\n    this.searchForMovie = function(title) {\r\n      var deferred = $q.defer();\r\n\r\n      var url = 'http://www.omdbapi.com/?s=' + title +'&page=1';\r\n      $http.get(url)\r\n        .success(function(response) {\r\n          var searchResults = response.Search;\r\n          deferred.resolve(searchResults);\r\n        })\r\n        return deferred.promise;\r\n    } \r\n\r\n    //Get specific details for a single movie\r\n    this.getMovieDetails = function(id) {\r\n      var deferred = $q.defer();\r\n\r\n      var url = \"http://www.omdbapi.com/?i=\" + id + \"&plot=full&r=json&tomatoes=true\";\r\n\r\n      $http.get(url)\r\n        .success(function(response) {\r\n          deferred.resolve(response);\r\n        })\r\n        return deferred.promise;\r\n    }\r\n});"]}