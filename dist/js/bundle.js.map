{"version":3,"sources":["app.js","services/localStorageService.js","services/omdbService.js","controllers/detailCtrl.js","controllers/mainCtrl.js","controllers/searchCtrl.js","controllers/shelfCtrl.js","coverDir.js"],"names":["angular","module","config","$stateProvider","$urlRouterProvider","state","url","templateUrl","controller","run","service","omdbService","LOCAL_STORAGE_NAME","testData","imdbID","Year","own","watch","Rated","Title","Poster","cleanData","movieData","i","length","splice","getSavedMovies","loadMovieData","localMovieData","localStorage","movieList","JSON","parse","getItem","saveMovie","movieObj","index","findIndex","element","push","setItem","stringify","console","log","clearShelves","removeItem","$http","$q","searchForMovie","title","deferred","defer","get","success","response","searchResults","Search","resolve","promise","getMovieDetails","id","$scope","$stateParams","then","serviceData","movie","test","localStorageService","reloadMovies","savedMovies","movies","j","searchTitle","ownedMovies","watchMovies","directive","coverController","addMovieToOwned","localMovie","reload","addMovieToWatch","restrict","scope"],"mappings":"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","file":"bundle.js","sourcesContent":["/*\r\n*\r\n*/\r\nangular.module('movieShelf', ['ui.router','ngAnimate']).config(function($stateProvider, $urlRouterProvider) {\r\n\t\r\n\r\n\t$stateProvider\r\n\t\t.state('home', {\r\n\t\t\turl: '/',\r\n\t\t\ttemplateUrl: './views/shelf.html',\r\n\t\t\tcontroller: 'shelfCtrl'\r\n\t\t})\r\n\t\t.state('search', {\r\n\t\t\turl: '/search',\r\n\t\t\ttemplateUrl: './views/search.html',\r\n\t\t\tcontroller: 'searchCtrl'\r\n\t\t})\r\n\t\t.state('details', {\r\n\t\t\turl: '/details/:id',\r\n\t\t\ttemplateUrl: './views/detail.html',\r\n\t\t\tcontroller: 'detailCtrl'\r\n\t\t})\r\n\r\n}).run();\r\n","angular.module('movieShelf').service('localStorageService', function(omdbService){\r\n  \r\n\tvar LOCAL_STORAGE_NAME = \"movieList\";\r\n\r\n\tvar testData = [\r\n\t\t\t\t\t\t{imdbID:'tt0080684',Year:1980, own:true, watch:false,Rated:\"PG\",Title:\"Star Wars: Episode V - The Empire Strikes Back\", Poster:\"https://images-na.ssl-images-amazon.com/images/M/MV5BYmViY2M2MTYtY2MzOS00YjQ1LWIzYmEtOTBiNjhlMGM0NjZjXkEyXkFqcGdeQXVyNDYyMDk5MTU@._V1_SX300.jpg\"},\r\n\t\t\t\t\t\t{imdbID:'tt0848228',Year:2012, own:true, watch:false,Rated:\"PG-13\",Title:\"The Avengers\",Poster:\"https://images-na.ssl-images-amazon.com/images/M/MV5BMTk2NTI1MTU4N15BMl5BanBnXkFtZTcwODg0OTY0Nw@@._V1_SX300.jpg\"},\r\n\t\t\t\t\t\t{imdbID:'tt1663662',Year:2013, own:true, watch:true,Rated:\"PG-13\",Title:\"Pacific Rim\",Poster:\"https://images-na.ssl-images-amazon.com/images/M/MV5BMTY3MTI5NjQ4Nl5BMl5BanBnXkFtZTcwOTU1OTU0OQ@@._V1_SX300.jpg\"},\r\n\t\t\t\t\t\t{imdbID:'tt1675434',Year:2011, own:true, watch:true,Rated:\"R\",Title:\"The Intouchables\",Poster:\"https://images-na.ssl-images-amazon.com/images/M/MV5BMTYxNDA3MDQwNl5BMl5BanBnXkFtZTcwNTU4Mzc1Nw@@._V1_SX300.jpg\"},\r\n\t\t\t\t\t\t{imdbID:'tt0360717',Year:2005, own:false, watch:true,Rated:\"PG-13\",Title:\"King Kong\",Poster:\"https://images-na.ssl-images-amazon.com/images/M/MV5BMjYxYmRlZWYtMzAwNC00MDA1LWJjNTItOTBjMzlhNGMzYzk3XkEyXkFqcGdeQXVyMTQxNzMzNDI@._V1_SX300.jpg\"},\r\n\t\t\t\t\t\t{imdbID:'tt0108052',Year:1993, own:false, watch:true,Rated:\"R\",Title:\"Schindler's List\",Poster:\"https://images-na.ssl-images-amazon.com/images/M/MV5BMzMwMTM4MDU2N15BMl5BanBnXkFtZTgwMzQ0MjMxMDE@._V1_SX300.jpg\"}\r\n\t\t\t\t\t]\r\n\r\n\t//Eliminates the problem of dead data\r\n\tvar cleanData = function(movieData) {\r\n\t\tfor(var i = movieData.length-1; i >= 0;i--) {\r\n\t\t\tif(!!!movieData[i].own && !!!movieData[i].watch) {\r\n\t\t\t\tmovieData.splice(i,1);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn movieData;\r\n\t}\r\n\r\n\t//GET SAVED MOVIES - public end point to get all saved movies\r\n\tthis.getSavedMovies = function() {\r\n\t\treturn loadMovieData();\r\n\t}\r\n\r\n\t//LOAD MOVIE DATA - Load movie data from local storage\r\n\tvar loadMovieData = function() {\r\n\t\tvar localMovieData;\r\n\t\tif(localStorage.movieList) {\r\n\t\t\tlocalMovieData = JSON.parse(localStorage.getItem(LOCAL_STORAGE_NAME));\r\n\t\t} else {\r\n\t\t\t//TODO: CHANGE FOR PROD\r\n\t\t\tlocalMovieData = testData;\r\n\r\n\t\t}\r\n\t\treturn localMovieData;\r\n\t}\r\n\r\n\t//SAVE MOVIE - save a movie object to local local storage \t=\t=\r\n\tthis.saveMovie = function(movieObj) {\r\n\t\t//Get the local movie data\r\n\t\tvar localMovieData = loadMovieData();\r\n\r\n\t\t//if id exists in array, update it\r\n\t\tvar index = localMovieData.findIndex(function(element) {\r\n\t\t\treturn element.imdbID == movieObj.imdbID;\r\n\t\t})\r\n\r\n\t\tif(index > 0) {\r\n\t\t\tlocalMovieData[index].own = !!movieObj.own;\r\n\t\t\tlocalMovieData[index].watch = !!movieObj.watch;\r\n\t\t} else {\r\n\t\t\tlocalMovieData.push(movieObj);\r\n\t\t}\r\n\t\t// localMovieData = cleanData(localMovieData);\r\n\t\t//Finally, save the data to local storage\r\n\t\tlocalStorage.setItem(LOCAL_STORAGE_NAME, JSON.stringify(localMovieData));\r\n\t\tconsole.log(localMovieData);\r\n\t}\r\n\r\n\t// //DELETE MOVIE - remove movie by movieId\t=\t=\t=\r\n\t// this.deleteMovie = function(movieId) {\r\n\t// \t//Get the local movie data\r\n\t// \tvar localMovieData = loadMovieData();\r\n\t// \t//find the id in the array\r\n\t// \tvar index = localMovieData.findIndex(function(element) {\r\n\t// \t\telement.id = movieObj.id;\r\n\t// \t})\r\n\t// \tif(index > 0) {\r\n\t// \t\tlocalMovieData.splice(index, 1);\r\n\t// \t\tlocalStorage.setItem(LOCAL_STORAGE_NAME, JSON.stringify(localMovieData));\r\n\t// \t}\r\n\t// }\r\n\r\n\t//CLEAR SHELVES - remove all movieShelf\t\t=\t=\t=\r\n\tthis.clearShelves = function() {\r\n\t\tlocalStorage.removeItem(LOCAL_STORAGE_NAME);\r\n\t}\r\n\r\n\r\n});","angular.module('movieShelf').service('omdbService', function($http, $q){\r\n  \r\n    //Acquire results for a movie search\r\n    this.searchForMovie = function(title) {\r\n      var deferred = $q.defer();\r\n\r\n      var url = 'http://www.omdbapi.com/?s=' + title +'&page=1';\r\n      $http.get(url)\r\n        .success(function(response) {\r\n          var searchResults = response.Search;\r\n          deferred.resolve(searchResults);\r\n        })\r\n        return deferred.promise;\r\n    } \r\n\r\n    //Get specific details for a single movie\r\n    this.getMovieDetails = function(id) {\r\n      var deferred = $q.defer();\r\n\r\n      var url = \"http://www.omdbapi.com/?i=\" + id + \"&plot=full&r=json&tomatoes=true\";\r\n\r\n      $http.get(url)\r\n        .success(function(response) {\r\n          deferred.resolve(response);\r\n        })\r\n        return deferred.promise;\r\n    }\r\n});","angular.module('movieShelf')\r\n.controller('detailCtrl', function($scope, $stateParams, omdbService) {\r\n\r\n\tomdbService.getMovieDetails($stateParams.id).then(function(serviceData) {\r\n\t\t$scope.movie = serviceData;\r\n\t\tconsole.log($scope.movie);\r\n\t});\r\n\r\n})","angular.module('movieShelf').controller('mainCtrl', function($scope) {\r\n\t$scope.test = \"Test Main Ctrl\";\r\n})","angular.module('movieShelf').controller('searchCtrl', function($scope, omdbService, localStorageService) {\r\n\r\n\t$scope.reloadMovies = function() {\r\n\t\tvar savedMovies = localStorageService.getSavedMovies();\r\n\t\tfor(var i = 0; i < $scope.movies.length;i++) {\r\n\t\t\tfor(var j = 0; j < savedMovies.length; j++) {\r\n\t\t\t\tif($scope.movies[i].imdbID == savedMovies[j].imdbID) {\r\n\t\t\t\t\t$scope.movies[i].own = savedMovies[j].own;\r\n\t\t\t\t\t$scope.movies[i].watch = savedMovies[j].watch;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t// $scope.movies = $scope.movies\r\n\t}\r\n\r\n\t$scope.searchForMovie = function() {\r\n\t\tomdbService.searchForMovie($scope.searchTitle).then(function(serviceData) {\r\n\t\t\t$scope.movies = serviceData;\r\n\t\t\t$scope.reloadMovies();\r\n\t\t})\r\n\t}\r\n\r\n\r\n\t\r\n});","angular.module('movieShelf')\r\n.controller('shelfCtrl', function($scope, omdbService, localStorageService) {\r\n\t\r\n\r\n\r\n\t//Load the extended film data asynchronously\r\n\t// var mergeData = function(localMovie) {\r\n\t// \tomdbService.getMovieDetails(localMovie.id).then(function(omdbMovie) {\r\n\t// \t\tvar fullMovie = {};\r\n\t// \t\tjQuery.extend(fullMovie, localMovie, omdbMovie);\r\n\t// \t\tif(fullMovie.own === true) {\r\n\t// \t\t$scope.ownedMovies.push(fullMovie);\r\n\t// \t\t}\r\n\t// \t\tif(fullMovie.watch === true) {\r\n\t// \t\t\t$scope.watchMovies.push(fullMovie);\r\n\t// \t\t}\r\n\t// \t})\r\n\t// }\r\n\r\n\t//Initial load\r\n\t$scope.loadMovieData = function() {\r\n\t\t$scope.ownedMovies = [];\r\n\t\t$scope.watchMovies = [];\r\n\r\n\t\tvar savedMovies = localStorageService.getSavedMovies();\r\n\t\tfor(var i = 0; i < savedMovies.length; i++) {\r\n\t\t\tif(savedMovies[i].own === true) {\r\n\t\t\t$scope.ownedMovies.push(savedMovies[i]);\r\n\t\t\t}\r\n\t\t\tif(savedMovies[i].watch === true) {\r\n\t\t\t\t$scope.watchMovies.push(savedMovies[i]);\r\n\t\t\t}\r\n\r\n//\t\t\tmergeData(savedMovies[i]);\r\n\t\t}\r\n\t}\r\n\t$scope.loadMovieData();\r\n\r\n\r\n\t$scope.clearShelves = function() {\r\n\t\tlocalStorageService.clearShelves();\r\n\t\t$scope.loadMovieData();\r\n\t}\r\n\r\n});","angular.module('movieShelf').directive('movieDisplay', function(){\r\n\t\r\n\tvar coverController = ['$scope', 'localStorageService', function($scope, localStorageService) {\r\n\t\t//Add a film to the Owned_Movies array\r\n\t\t$scope.addMovieToOwned = function(movie) {\r\n\t\t\tvar localMovie = {\r\n\t\t\t\timdbID:movie.imdbID,\r\n\t\t\t\tTitle:movie.Title,\r\n\t\t\t\tPoster:movie.Poster,\r\n\t\t\t\tYear:movie.Year,\r\n\t\t\t\town:!!!movie.own,\r\n\t\t\t\twatch:!!movie.watch\r\n\t\t\t}\r\n\t\t\tlocalStorageService.saveMovie(localMovie);\r\n\t\t\t$scope.reload();\r\n\t\t}\r\n\r\n\t\t//Add a film to the To_Watch_Movies array \r\n\t\t$scope.addMovieToWatch = function(movie) {\r\n\t\t\tvar localMovie = {\r\n\t\t\t\timdbID:movie.imdbID,\r\n\t\t\t\tTitle:movie.Title,\r\n\t\t\t\tPoster:movie.Poster,\r\n\t\t\t\tYear:movie.Year,\r\n\t\t\t\town:!!movie.own,\r\n\t\t\t\twatch:!!!movie.watch\r\n\t\t\t}\r\n\t\t\tlocalStorageService.saveMovie(localMovie);\r\n\t\t\t$scope.reload();\r\n\t\t\r\n\t\t}\r\n\r\n\t\r\n\t}]\r\n\r\n\treturn {\r\n\t\trestrict: \"E\",\r\n\t\ttemplateUrl: './directives/coverDir.html',\r\n\t\tscope: {\r\n\t\t\tmovies: '=',\r\n\t\t\treload: '&'\r\n\t\t},\r\n\t\tcontroller: coverController\r\n\t}\r\n})"]}