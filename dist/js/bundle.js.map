{"version":3,"sources":["app.js","controllers/detailCtrl.js","controllers/mainCtrl.js","controllers/searchCtrl.js","controllers/shelfCtrl.js","services/localStorageService.js","services/omdbService.js","coverDir.js"],"names":["angular","module","config","$stateProvider","$urlRouterProvider","state","url","templateUrl","controller","$scope","$stateParams","omdbService","getMovieDetails","id","then","serviceData","movie","console","log","test","localStorageService","reloadMovies","savedMovies","getSavedMovies","i","movies","length","j","imdbID","own","watch","searchForMovie","searchTitle","loadMovieData","ownedMovies","watchMovies","push","clearShelves","service","LOCAL_STORAGE_NAME","testData","Year","Rated","Title","Poster","localMovieData","localStorage","movieList","JSON","parse","getItem","saveMovie","movieObj","index","findIndex","element","undefined","setItem","stringify","deleteMovie","movieId","splice","removeItem","$http","$q","title","deferred","defer","get","success","response","searchResults","Search","resolve","promise","directive","coverController","addMovieToOwned","localMovie","reload","addMovieToWatch","restrict","scope"],"mappings":"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","file":"bundle.js","sourcesContent":["/*\r\n*\r\n*/\r\nangular.module('movieShelf', ['ui.router']).config(function($stateProvider, $urlRouterProvider) {\r\n\t\r\n\r\n\t$stateProvider\r\n\t\t.state('home', {\r\n\t\t\turl: '/',\r\n\t\t\ttemplateUrl: './views/shelf.html',\r\n\t\t\tcontroller: 'shelfCtrl'\r\n\t\t})\r\n\t\t.state('search', {\r\n\t\t\turl: '/search',\r\n\t\t\ttemplateUrl: './views/search.html',\r\n\t\t\tcontroller: 'searchCtrl'\r\n\t\t})\r\n\t\t.state('details', {\r\n\t\t\turl: '/details/:id',\r\n\t\t\ttemplateUrl: './views/detail.html',\r\n\t\t\tcontroller: 'detailCtrl'\r\n\t\t})\r\n\r\n});\r\n","angular.module('movieShelf')\r\n.controller('detailCtrl', function($scope, $stateParams, omdbService) {\r\n\r\n\tomdbService.getMovieDetails($stateParams.id).then(function(serviceData) {\r\n\t\t$scope.movie = serviceData;\r\n\t\tconsole.log($scope.movie);\r\n\t});\r\n\r\n})","angular.module('movieShelf').controller('mainCtrl', function($scope) {\r\n\t$scope.test = \"Test Main Ctrl\";\r\n})","angular.module('movieShelf').controller('searchCtrl', function($scope, omdbService, localStorageService) {\r\n\r\n\t$scope.reloadMovies = function() {\r\n\t\tvar savedMovies = localStorageService.getSavedMovies();\r\n\t\tfor(var i = 0; i < $scope.movies.length;i++) {\r\n\t\t\tfor(var j = 0; j < savedMovies.length; j++) {\r\n\t\t\t\tif($scope.movies[i].imdbID == savedMovies[j].imdbID) {\r\n\t\t\t\t\t$scope.movies[i].own = savedMovies[j].own;\r\n\t\t\t\t\t$scope.movies[i].watch = savedMovies[j].watch;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t// $scope.movies = $scope.movies\r\n\t}\r\n\r\n\t$scope.searchForMovie = function() {\r\n\t\tomdbService.searchForMovie($scope.searchTitle).then(function(serviceData) {\r\n\t\t\t$scope.movies = serviceData;\r\n\t\t\t$scope.reloadMovies();\r\n\t\t})\r\n\t}\r\n\r\n\r\n\t\r\n});","angular.module('movieShelf')\r\n.controller('shelfCtrl', function($scope, omdbService, localStorageService) {\r\n\t\r\n\r\n\r\n\t//Load the extended film data asynchronously\r\n\t// var mergeData = function(localMovie) {\r\n\t// \tomdbService.getMovieDetails(localMovie.id).then(function(omdbMovie) {\r\n\t// \t\tvar fullMovie = {};\r\n\t// \t\tjQuery.extend(fullMovie, localMovie, omdbMovie);\r\n\t// \t\tif(fullMovie.own === true) {\r\n\t// \t\t$scope.ownedMovies.push(fullMovie);\r\n\t// \t\t}\r\n\t// \t\tif(fullMovie.watch === true) {\r\n\t// \t\t\t$scope.watchMovies.push(fullMovie);\r\n\t// \t\t}\r\n\t// \t})\r\n\t// }\r\n\r\n\t//Initial load\r\n\t$scope.loadMovieData = function() {\r\n\t\t$scope.ownedMovies = [];\r\n\t\t$scope.watchMovies = [];\r\n\r\n\t\tvar savedMovies = localStorageService.getSavedMovies();\r\n\t\tfor(var i = 0; i < savedMovies.length; i++) {\r\n\t\t\tif(savedMovies[i].own === true) {\r\n\t\t\t$scope.ownedMovies.push(savedMovies[i]);\r\n\t\t\t}\r\n\t\t\tif(savedMovies[i].watch === true) {\r\n\t\t\t\t$scope.watchMovies.push(savedMovies[i]);\r\n\t\t\t}\r\n\r\n//\t\t\tmergeData(savedMovies[i]);\r\n\t\t}\r\n\t}\r\n\t$scope.loadMovieData();\r\n\r\n\r\n\t$scope.clearShelves = function() {\r\n\t\tlocalStorageService.clearShelves();\r\n\t\t$scope.loadMovieData();\r\n\t}\r\n\r\n});","angular.module('movieShelf').service('localStorageService', function(omdbService){\r\n  \r\n\tvar LOCAL_STORAGE_NAME = \"movieList\";\r\n\r\n\tvar testData = [\r\n\t\t\t\t\t\t{imdbID:'tt0080684',Year:1980, own:true, watch:false,Rated:\"PG\",Title:\"Star Wars: Episode V - The Empire Strikes Back\", Poster:\"https://images-na.ssl-images-amazon.com/images/M/MV5BYmViY2M2MTYtY2MzOS00YjQ1LWIzYmEtOTBiNjhlMGM0NjZjXkEyXkFqcGdeQXVyNDYyMDk5MTU@._V1_SX300.jpg\"},\r\n\t\t\t\t\t\t{imdbID:'tt0848228',Year:2012, own:true, watch:false,Rated:\"PG-13\",Title:\"The Avengers\",Poster:\"https://images-na.ssl-images-amazon.com/images/M/MV5BMTk2NTI1MTU4N15BMl5BanBnXkFtZTcwODg0OTY0Nw@@._V1_SX300.jpg\"},\r\n\t\t\t\t\t\t{imdbID:'tt1663662',Year:2013, own:true, watch:true,Rated:\"PG-13\",Title:\"Pacific Rim\",Poster:\"https://images-na.ssl-images-amazon.com/images/M/MV5BMTY3MTI5NjQ4Nl5BMl5BanBnXkFtZTcwOTU1OTU0OQ@@._V1_SX300.jpg\"},\r\n\t\t\t\t\t\t{imdbID:'tt1675434',Year:2011, own:true, watch:true,Rated:\"R\",Title:\"The Intouchables\",Poster:\"https://images-na.ssl-images-amazon.com/images/M/MV5BMTYxNDA3MDQwNl5BMl5BanBnXkFtZTcwNTU4Mzc1Nw@@._V1_SX300.jpg\"},\r\n\t\t\t\t\t\t{imdbID:'tt0360717',Year:2005, own:false, watch:true,Rated:\"PG-13\",Title:\"King Kong\",Poster:\"https://images-na.ssl-images-amazon.com/images/M/MV5BMjYxYmRlZWYtMzAwNC00MDA1LWJjNTItOTBjMzlhNGMzYzk3XkEyXkFqcGdeQXVyMTQxNzMzNDI@._V1_SX300.jpg\"},\r\n\t\t\t\t\t\t{imdbID:'tt0108052',Year:1993, own:false, watch:true,Rated:\"R\",Title:\"Schindler's List\",Poster:\"https://images-na.ssl-images-amazon.com/images/M/MV5BMzMwMTM4MDU2N15BMl5BanBnXkFtZTgwMzQ0MjMxMDE@._V1_SX300.jpg\"}\r\n\t\t\t\t\t]\r\n\r\n\t//GET SAVED MOVIES - public end point to get all saved movies\r\n\tthis.getSavedMovies = function() {\r\n\t\treturn loadMovieData();\r\n\t}\r\n\r\n\t//LOAD MOVIE DATA - Load movie data from local storage\r\n\tvar loadMovieData = function() {\r\n\t\tvar localMovieData;\r\n\t\tif(localStorage.movieList) {\r\n\t\t\tlocalMovieData = JSON.parse(localStorage.getItem(LOCAL_STORAGE_NAME));\r\n\t\t} else {\r\n\t\t\t//TODO: CHANGE FOR PROD\r\n\t\t\tlocalMovieData = testData;\r\n\r\n\t\t}\r\n\t\treturn localMovieData;\r\n\t}\r\n\r\n\t//SAVE MOVIE - save a movie object to local local storage \t=\t=\r\n\tthis.saveMovie = function(movieObj) {\r\n\t\t//Get the local movie data\r\n\t\tvar localMovieData = loadMovieData();\r\n\r\n\t\t//if id exists in array, update it\r\n\t\tvar index = localMovieData.findIndex(function(element) {\r\n\t\t\treturn element.imdbID == movieObj.imdbID;\r\n\t\t})\r\n\r\n\t\tif(index > 0) {\r\n\t\t\tif(movieObj.own != undefined) {\r\n\t\t\t\tlocalMovieData[index].own = movieObj.own;\r\n\t\t\t}\r\n\t\t\tif(movieObj.watch != undefined) {\r\n\t\t\t\tlocalMovieData[index].watch = movieObj.watch;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t} else {\r\n\t\t\tlocalMovieData.push(movieObj);\r\n\t\t}\r\n\r\n\t\t//Finally, save the data to local storage\r\n\t\tlocalStorage.setItem(LOCAL_STORAGE_NAME, JSON.stringify(localMovieData));\r\n\r\n\t}\r\n\r\n\t//DELETE MOVIE - remove movie by movieId\t=\t=\t=\r\n\tthis.deleteMovie = function(movieId) {\r\n\t\t//Get the local movie data\r\n\t\tvar localMovieData = loadMovieData();\r\n\t\t//find the id in the array\r\n\t\tvar index = localMovieData.findIndex(function(element) {\r\n\t\t\telement.id = movieObj.id;\r\n\t\t})\r\n\t\tif(index > 0) {\r\n\t\t\tlocalMovieData.splice(index, 1);\r\n\t\t\tlocalStorage.setItem(LOCAL_STORAGE_NAME, JSON.stringify(localMovieData));\r\n\t\t}\r\n\t}\r\n\r\n\t//CLEAR SHELVES - remove all movieShelf\t\t=\t=\t=\r\n\tthis.clearShelves = function() {\r\n\t\tlocalStorage.removeItem(LOCAL_STORAGE_NAME);\r\n\t}\r\n\r\n\r\n});","angular.module('movieShelf').service('omdbService', function($http, $q){\r\n  \r\n    //Acquire results for a movie search\r\n    this.searchForMovie = function(title) {\r\n      var deferred = $q.defer();\r\n\r\n      var url = 'http://www.omdbapi.com/?s=' + title +'&page=1';\r\n      $http.get(url)\r\n        .success(function(response) {\r\n          var searchResults = response.Search;\r\n          deferred.resolve(searchResults);\r\n        })\r\n        return deferred.promise;\r\n    } \r\n\r\n    //Get specific details for a single movie\r\n    this.getMovieDetails = function(id) {\r\n      var deferred = $q.defer();\r\n\r\n      var url = \"http://www.omdbapi.com/?i=\" + id + \"&plot=full&r=json&tomatoes=true\";\r\n\r\n      $http.get(url)\r\n        .success(function(response) {\r\n          deferred.resolve(response);\r\n        })\r\n        return deferred.promise;\r\n    }\r\n});","angular.module('movieShelf').directive('movieDisplay', function(){\r\n\t\r\n\tvar coverController = ['$scope', 'localStorageService', function($scope, localStorageService) {\r\n\t\t//Add a film to the Owned_Movies array\r\n\t\t$scope.addMovieToOwned = function(movie) {\r\n\t\t\tmovie.own = !!movie.own;\t\t//To deal w/ undefined on initial load\r\n\t\t\tvar localMovie = {\r\n\t\t\t\timdbID:movie.imdbID,\r\n\t\t\t\tTitle:movie.Title,\r\n\t\t\t\tPoster:movie.Poster,\r\n\t\t\t\tYear:movie.Year,\r\n\t\t\t\town:!movie.own\r\n\t\t\t}\r\n\t\t\tlocalStorageService.saveMovie(localMovie);\r\n\t\t\t$scope.reload();\r\n\t\t}\r\n\r\n\t\t//Add a film to the To_Watch_Movies array \r\n\t\t$scope.addMovieToWatch = function(movie) {\r\n\t\t\tmovie.watch = !!movie.watch;\t//To deal w/ undefined on initial load\r\n\t\t\tvar localMovie = {\r\n\t\t\t\timdbID:movie.imdbID,\r\n\t\t\t\tTitle:movie.Title,\r\n\t\t\t\tPoster:movie.Poster,\r\n\t\t\t\tYear:movie.Year,\r\n\t\t\t\twatch:!movie.watch\r\n\t\t\t}\r\n\t\t\tlocalStorageService.saveMovie(localMovie);\r\n\t\t\t$scope.reload();\r\n\t\t\r\n\t\t}\r\n\r\n\t\r\n\t}]\r\n\r\n\treturn {\r\n\t\trestrict: \"E\",\r\n\t\ttemplateUrl: './directives/coverDir.html',\r\n\t\tscope: {\r\n\t\t\tmovies: '=',\r\n\t\t\treload: '&'\r\n\t\t},\r\n\t\tcontroller: coverController\r\n\t}\r\n})"]}